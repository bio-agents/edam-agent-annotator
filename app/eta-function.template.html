<div ng-if="etaFunctions.isWellDefined() && etaFunctions.hasFunctions()">
    <!-- functions -->
    <div ng-repeat="f in etaFunctions.getFunctions()">
        <div class="panel panel-primary"">
            <div class="panel-heading clearfix eta-text-xl">
                <strong>Function *</strong>
                <span class="pull-right">
                    <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(etaFunctions, 'removeFunctionAtIndex', $index)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
               </span>
            </div>
            <div class="panel-body">
                <!-- operations for this function -->
                <div class="panel panel-warning">
                    <div class="panel-heading clearfix">
                        <strong>Operations *</strong>
                        <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(f, 'clearOperations', null)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                    </div>

                    <div class="panel-body" ng-if="f.hasOperationProperty()">
                        <eta-term-collection tree-type="operation" added-terms-list="f.operation" color-class="warning" autocomplete-id="auto-operation-{{$index}}"></eta-term-collection>
                    </div>

                    <div class="btn-group btn-group-justified" ng-if="!f.hasOperationProperty()">

                        <a class="btn btn-default" ng-click="f.createOperation()">Add Operations</a>

                    </div>
                </div>
                <hr>

                <!-- Inputs (data and formats) for this function -->
                <div ng-if="f.isInputWellDefined() && f.hasInputs()">
                    <div class="panel panel-success" ng-repeat = "input in f.getInputs()">
                        <div class="panel-heading">
                            <strong>Input</strong>
                            <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(f,'removeInputAtIndex',$index)">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </div>
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <strong>Input Data Type *</strong>
                                    <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(input, 'clearData', null)">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </div>
                                <div class="panel-body" ng-if="input.hasDataProperty()">
                                    <eta-term tree-type="data" added-term="input.data" color-class="success" autocomplete-id="auto-indata-{{$parent.$index}}-{{$index}}"></eta-term-collection>
                                </div>

                                <div class="btn-group btn-group-justified" ng-if="!input.hasDataProperty()">

                                    <a class="btn btn-default" ng-click="input.createData()">Add Input Data Type</a>

                                </div>
                            </div>
                            <hr>
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <strong>Input Data Format</strong>
                                    <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(input, 'clearFormats', null)">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </div>
                                <div class="panel-body" ng-if="input.hasFormatProperty()">
                                    <eta-term-collection tree-type="format" added-terms-list="input.format" color-class="success" autocomplete-id="auto-informat-{{$parent.$index}}-{{$index}}"></eta-term-collection>
                                </div>

                                <div class="btn-group btn-group-justified" ng-if="!input.hasFormatProperty()">

                                    <a class="btn btn-default" ng-click="input.createFormat()">Add Input Data Format</a>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Add other inputs -->
                <div class="btn-group btn-group-justified">
                    <a class="btn btn-success" ng-click="f.createInput()">Add Input</a>
                </div>
                <hr>
                <!-- Outputs (data and formats) for this function -->
                <div ng-if="f.isOutputWellDefined() && f.hasOutputs()">
                    <div class="panel panel-danger" ng-repeat = "output in f.getOutputs()">
                        <div class="panel-heading">
                            <strong>Ouput</strong>
                            <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(f,'removeOutputAtIndex',$index)">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </div>
                        <div class="panel-body">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <strong>Output Data Type *</strong>
                                    <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(output, 'clearData',null)">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </div>
                                <div class="panel-body" ng-if="output.hasDataProperty()">
                                   <eta-term tree-type="data" added-term="output.data" color-class="danger" autocomplete-id="auto-outdata-{{$parent.$index}}-{{$index}}"></eta-term-collection>
                                </div>

                                <div class="btn-group btn-group-justified" ng-if="!output.hasDataProperty()">

                                    <a class="btn btn-default" ng-click="output.createData()">Add Output Data Type</a>

                                </div>
                            </div>
                            <hr>
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <strong>Output Data Format</strong>
                                    <button class="btn btn-default btn-xs highlight-icon pull-right" type="button" ng-click="removeOnConfirm(output, 'clearFormats',null)">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </div>
                                <div class="panel-body" ng-if="output.hasFormatProperty()">
                                    <eta-term-collection tree-type="format" added-terms-list="output.format" color-class="danger" autocomplete-id="auto-outformat-{{$parent.$index}}-{{$index}}"></eta-term-collection>
                                </div>

                                <div class="btn-group btn-group-justified" ng-if="!output.hasFormatProperty()">

                                    <a class="btn btn-default" ng-click="output.createFormat()">Add Output Data Format</a>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Add other inputs -->
                <div class="btn-group btn-group-justified">
                    <a class="btn btn-danger" ng-click="f.createOutput()">Add Output</a>
                </div>
                <hr>
                <!--<div ng-show="f.hasCommentProperty()">
                    <div class="form-group">
                        <label for="comment">Comment:</label>
                        <textarea class="form-control" rows="2" id="comment" ng-model=f.comment></textarea>
                    </div>
                </div>
                <div class="btn-group btn-group-justified" ng-hide="f.hasOwnProperty('comment')">
                    <a class="btn btn-default" ng-click="f.createComment()">Add Comment</a>
                </div>-->
                <div class="form-group">
                    <label for="comment">Comment:</label>
                    <textarea class="form-control" rows="2" id="comment" ng-model=f.comment></textarea>
                </div>
            </div>
        </div>
        <hr>
    </div>
</div>



<div class="btn-group btn-group-justified">
    <a class="btn btn-primary" ng-click='etaFunctions.createFunction()'>Add Function</a>
</div>
